
.segment "NES_FILE_HEADER"
.byte "NES", $1A, 2

.segment "CODE"
main:        ;  Addr
    JMP init ; 0x8000 @REG A=0x00 X=0x00 Y=0x00 S=0xfd P=0b00100100 PC=0x8004
    NOP      ; 0x8003

init:
    LDA #$7f ; 0x8004 @REG A=0x7f X=0x00 Y=0x00 S=0xfd P=0b00100100 PC=0x8006
    STA  $0  ; 0x8006 @REG A=0x7f X=0x00 Y=0x00 S=0xfd P=0b00100100 PC=0x8008 @RAM 0x0000 0x7f
    JSR func ; 0x8008 @REG A=0x7f X=0x00 Y=0x00 S=0xfb P=0b00100100 PC=0x800c
    NOP      ; 0x800b

func:
    INC $0   ; 0x800c @REG A=0x7f X=0x00 Y=0x00 S=0xfb P=0b10100100 PC=0x800e @RAM 0x0000 0x80
    RTS      ; 0x800e @REG A=0x7f X=0x00 Y=0x00 S=0xfd P=0b10100100 PC=0x800b

;; TODO: BRK RTI

.segment "INTERRUPT_VECTOR"
    .word main, main, main